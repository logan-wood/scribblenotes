<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="../../css/searchbar.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

        <!-- Icons -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
        <!-- Style Icons -->
        <style>
            .material-symbols-outlined {
              font-variation-settings:
              'FILL' 0,
              'wght' 100,
              'GRAD' 0,
              'opsz' 48
            }
        </style>
    </head>
    <body>
        <div class="topnav">

            <input class="searchBar" style="width: 95%;" type="text" placeholder="Search..." />
            <% if (locals.user) { %>
            
                <span class="material-symbols-outlined" id="notif-bell" onclick="showNotifications()">notifications</span>
            
            <% } %> 
                   
        </div>
            <div class="notif-box" id="notif-box">
                <div class="notif-title">
                    <b>Notifications</b>
                    <form action="user/clear_notifications" method="post" id="clear-notifs">
                        <a href="javascript:{}" onclick="document.getElementById('clear-notifs').submit()" class="clear-notifs">Clear All</a>
                    </form>
                </div>
                <% if (notifications) { %>
                    <% notifications.forEach(element => { %>
                    <%- include('./notification', { name: element.name, message: element.message, id: element.notification_id}); %>
                    <% }); %>
                <% } else { %>
                    <p style="text-align: center;">No Notifications</p>
                <% } %>
            </div>
            

    </body>

    <script>
        //declare outside of function
        var isActive = false

        function showNotifications() {
            if (isActive) {
                document.getElementById("notif-box").style.display = "none"

                isActive = false;
            } else {
                document.getElementById("notif-box").style.display = "block"

                isActive = true;
            }
        }

    </script>

    </html>
    
